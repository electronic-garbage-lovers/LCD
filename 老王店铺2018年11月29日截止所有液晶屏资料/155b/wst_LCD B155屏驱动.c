//ÏþÐÜ±àÐ´ STC12C5A60S2µ¥Æ¬»ú 4M   UV2±àÒë
//ÀÏÍõWST LCD B155ÆÁÇý¶¯³ÌÐò£¬Êµ¼ÊÊÇ160*160ÆÁ UC1698

//#include <reg51.h>    //51Í·ÎÄ¼þ
#include <STC12C5A60S2.H>  //ÎÒÓÃµÄSTC125a60s2,Èç¹ûÓÃ51Ó¦¸ÃÆÁ±Î
#include <intrins.h>

#define uchar unsigned char
#define uint unsigned int
#define _Nop() _nop_(); _nop_();

#define  dport  P0 //Êý¾Ý¿Ú

//Òý½Å¶¨Òå
sbit cs=P1^0;	      
sbit rs=P1^1;		  
sbit rd=P1^2;		  
sbit wr=P1^3;		 
sbit rst=P1^5;       
//ÒÔ×ÝÏò8¸öÁ¬Ðøµã¹¹³ÉÒ»¸ö×Ö½Ú,×îÉÏ±ßµÄµãÎª×Ö½ÚµÄ×îµÍÎ»,¼´BIT0,×îÏÂ±ßµÄµãÎªBIT7¡£
//  24¡Á24ºº×Ö°´Ã¿ÐÐ24×Ö½Ú,¹²3ÐÐÈ¡×ÖÄ£,Ã¿¸öºº×Ö¹²72×Ö½Ú×óÉÏ½Ç¡úÓÒÉÏ½Ç¡ú×óÏÂ½Ç¡úÓÒÏÂ½Ç¡£


unsigned char code hanzi[]={

/*No:0	Ïþ   Ê¹ÓÃÆµ¶È=1*/
	0x00,0x00,0xF0,0x20,0x20,0x20,0x20,0xF0,0x00,0x40,0x40,0x40,0x5C,0xFC,0xC0,0x40,0x20,0x20,0xE0,0xB0,0x10,0x00,0x00,0x00,0x00,0x00,0xFF,0x08,0x08,0x08,0x08,0xFF,0x00,0x00,0x90,0x90,0x90,0x88,0x8F,0x86,0x8E,0x9B,0x71,0x50,0x30,0x3E,0x00,0x00,0x00,0x00,0x0F,0x02,0x02,0x02,0x42,0x47,0x40,0x20,0x10,0x1E,0x03,0x00,0x00,0x3F,0x20,0x20,0x20,0x20,0x20,0x3E,0x20,0x00,
/*No:1	ÐÜ   Ê¹ÓÃÆµ¶È=1*/
	0x00,0x00,0x40,0xE0,0xD0,0x58,0x4C,0x44,0x40,0x50,0x60,0xC0,0x00,0xFC,0x44,0x20,0x20,0x10,0x18,0x08,0xE0,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0xFE,0x4A,0x4A,0x4A,0x4A,0xFE,0xFE,0x00,0x00,0xFD,0x45,0x21,0x21,0x31,0x11,0x11,0xC1,0x00,0x00,0x00,0x00,0x00,0x40,0x74,0x0B,0x00,0x00,0x02,0x1E,0x73,0x01,0x00,0x00,0x09,0x73,0x62,0x02,0x02,0x0A,0x12,0x73,0x01,0x00,0x00,
/*No:2	Òº   Ê¹ÓÃÆµ¶È=1*/
	0x00,0x00,0x00,0x00,0x18,0x70,0x20,0x00,0x00,0x20,0x20,0xE0,0x20,0x20,0x24,0xDC,0x20,0x20,0x20,0x20,0x10,0x10,0x00,0x00,0x00,0x01,0x02,0x0E,0x08,0xF0,0x8E,0x41,0x30,0xFC,0xFB,0x81,0x60,0x38,0xCE,0x0B,0x12,0x32,0xE2,0x3E,0x02,0x00,0x00,0x00,0x00,0x00,0x02,0x7E,0x7F,0x00,0x00,0x00,0x00,0x7F,0x7F,0x80,0x40,0x20,0x10,0x1B,0x06,0x0F,0x19,0x30,0x60,0x20,0x20,0x00,
/*No:3	¾§   Ê¹ÓÃÆµ¶È=1*/
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFC,0x48,0x48,0x48,0x48,0x48,0x48,0x48,0x48,0x48,0xFC,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0x20,0x20,0x20,0x27,0x22,0xF2,0x32,0x02,0x02,0xF2,0xE2,0x22,0x22,0x27,0x20,0x20,0xF0,0x20,0x00,0x00,0x00,0x00,0x00,0x7F,0x22,0x22,0x22,0x22,0x22,0x7F,0x00,0x00,0x00,0x7F,0x7F,0x22,0x22,0x22,0x22,0x22,0x7F,0x00,0x00,0x00,
/*No:4	²â   Ê¹ÓÃÆµ¶È=1*/
	0x00,0x80,0x00,0x04,0x18,0x30,0x00,0xFC,0xF8,0x08,0xC8,0x88,0x08,0x08,0xF8,0x00,0x00,0xE0,0x00,0x00,0xFC,0x00,0x00,0x00,0x00,0x00,0x01,0x07,0xC0,0x3C,0x03,0xFF,0xFF,0x00,0xFF,0x3F,0x00,0x00,0xFF,0x00,0x00,0xFF,0x00,0x00,0xFF,0x00,0x00,0x00,0x00,0x01,0x01,0x3F,0x3F,0x00,0x40,0x21,0x11,0x0C,0x03,0x04,0x04,0x18,0x30,0x00,0x00,0x23,0x20,0x60,0x7F,0x00,0x00,0x00,
/*No:5	ÊÔ   Ê¹ÓÃÆµ¶È=1*/
	0x00,0x00,0x00,0x08,0x30,0x60,0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0xFC,0x88,0x88,0x98,0xB0,0xC0,0x80,0x00,0x00,0x08,0x08,0x08,0x08,0xFC,0x00,0x00,0x00,0x10,0x10,0x10,0xF0,0x10,0x08,0x08,0x3F,0xE0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3F,0x10,0x08,0x16,0x12,0x18,0x08,0x0F,0x08,0x04,0x04,0x00,0x01,0x07,0x1C,0x30,0x7C,0x62,0x00,
/*No:6	³Ì   Ê¹ÓÃÆµ¶È=1*/
	0x00,0x00,0x10,0x10,0x10,0x08,0xF8,0x08,0x0C,0x08,0x00,0x0C,0xF8,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0xFC,0x08,0x00,0x00,0x00,0x00,0x02,0x82,0x72,0x1E,0xFF,0x0A,0x31,0x61,0x02,0x16,0x13,0x12,0x12,0x12,0xF2,0x12,0x12,0x12,0x0B,0x08,0x00,0x00,0x00,0x04,0x02,0x01,0x00,0x70,0x7F,0x00,0x00,0x20,0x20,0x20,0x22,0x22,0x22,0x22,0x3F,0x22,0x22,0x22,0x21,0x30,0x20,0x00,
/*No:7	Ðò   Ê¹ÓÃÆµ¶È=1*/
	0x00,0x00,0x00,0x00,0xF0,0x10,0x10,0x90,0x90,0x90,0x92,0x94,0x9C,0x90,0x90,0x90,0x90,0x90,0x90,0x90,0x18,0x10,0x00,0x00,0x00,0x00,0x00,0x80,0xFF,0x00,0x00,0x20,0x20,0x20,0x20,0x22,0x24,0xFC,0xEC,0x22,0x22,0x21,0xA1,0x60,0x70,0x30,0x20,0x00,0x00,0x20,0x18,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x60,0x7F,0x1F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	};



unsigned char code try[]=
{/*--  ÎÄ×Ö:  ÎÒ  --*/
/*--  ËÎÌå18;  ´Ë×ÖÌåÏÂ¶ÔÓ¦µÄµãÕóÎª£º¿íx¸ß=24x24   --*/
0x00,0x00,0x00,0x20,0x10,0x10,0x10,0xF0,0x18,0x08,0x0C,0x00,0x00,0xFC,0x08,0x00,
0x00,0x18,0x70,0x60,0x00,0x00,0x00,0x00,0x00,0x00,0x82,0x82,0x82,0x82,0x42,0xFF,
0x42,0x22,0x22,0x22,0x22,0x3F,0xFF,0x02,0xC2,0x62,0x3E,0x1A,0x01,0x01,0x00,0x00,
0x00,0x00,0x01,0x01,0x20,0x20,0x60,0x3F,0x00,0x20,0x10,0x08,0x08,0x04,0x07,0x07,
0x0D,0x18,0x30,0x20,0x60,0x7C,0x40,0x00,

/*--  ÎÄ×Ö:  Äã  --*/
/*--  ËÎÌå18;  ´Ë×ÖÌåÏÂ¶ÔÓ¦µÄµãÕóÎª£º¿íx¸ß=24x24   --*/
0x00,0x00,0x00,0x00,0x00,0xC0,0x78,0x1C,0x04,0x00,0x00,0xE0,0xBC,0x8C,0x80,0x80,
0x80,0x80,0x80,0x80,0xC0,0xC0,0x00,0x00,0x00,0x30,0x08,0x04,0x03,0xFF,0x01,0x00,
0x08,0x06,0xC1,0x70,0x10,0x00,0x00,0xFE,0x00,0x00,0x20,0x63,0xC1,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x7F,0x20,0x00,0x0C,0x03,0x01,0x00,0x20,0x20,0x60,0x3F,
0x00,0x00,0x00,0x00,0x01,0x0F,0x00,0x00,

/*--  ÎÄ×Ö:  Ëû  --*/
/*--  ËÎÌå18;  ´Ë×ÖÌåÏÂ¶ÔÓ¦µÄµãÕóÎª£º¿íx¸ß=24x24   --*/
0x00,0x00,0x00,0x00,0x80,0xE0,0x3E,0x0C,0x04,0x00,0xC0,0x00,0x00,0x00,0xFC,0x04,
0x00,0x00,0x00,0x80,0x80,0x00,0x00,0x00,0x00,0x20,0x10,0x0C,0x03,0xFF,0x00,0x00,
0x04,0x04,0xFF,0x04,0x02,0x02,0xFF,0x01,0x01,0x81,0x81,0xFF,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x7F,0x00,0x00,0x00,0x00,0x3F,0x60,0x60,0x60,0x67,0x60,
0x60,0x60,0x61,0x60,0x60,0x3E,0x20,0x00,

/*--  ÎÄ×Ö:  Åó  --*/
/*--  ËÎÌå18;  ´Ë×ÖÌåÏÂ¶ÔÓ¦µÄµãÕóÎª£º¿íx¸ß=24x24   --*/
0x00,0x00,0x00,0x00,0xF8,0x08,0x08,0x08,0x08,0xF8,0x08,0x00,0x00,0xF8,0xF8,0x08,
0x08,0x08,0x08,0x08,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0x21,0x21,0x21,
0x21,0xFF,0x00,0x00,0x00,0xFF,0xFF,0x21,0x21,0x21,0x21,0x21,0xFF,0x00,0x00,0x00,
0x00,0x40,0x30,0x0F,0x01,0x00,0x10,0x10,0x30,0x3F,0x40,0x20,0x18,0x07,0x00,0x00,
0x00,0x20,0x60,0x70,0x3F,0x00,0x00,0x00,

/*--  ÎÄ×Ö:  ÓÑ  --*/
/*--  ËÎÌå18;  ´Ë×ÖÌåÏÂ¶ÔÓ¦µÄµãÕóÎª£º¿íx¸ß=24x24   --*/
0x00,0x00,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0xF0,0x7C,0x44,0x40,0x40,0x40,0x40,
0x40,0x40,0x40,0x60,0x60,0x40,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xE0,
0x3C,0x07,0x18,0x68,0x88,0x08,0x08,0xC8,0x78,0x1C,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x40,0x20,0x10,0x08,0x06,0x43,0x40,0x40,0x20,0x20,0x10,0x09,0x0E,0x06,0x09,
0x18,0x30,0x30,0x60,0x60,0x20,0x00,0x00,
	
	};
unsigned char code ni[]=
{
	
0x00,0x40,0xB2,0x96,0x9A,0x92,0xF6,0x9A,0x93,0x91,0x99,0x97,0x91,0x90,0x30,0x00,
0x40,0x20,0xA0,0x90,0x4C,0x47,0x2A,0x2A,0x12,0x1A,0x26,0x22,0x40,0xC0,0x40,0x00,

	};



void delay_us(uint us)
{
	while(us--);
}

void delay_ms(uint ms)
{
	uchar i;
	while(ms--)
		for(i=0;i<120;i++);
}

/*uchar read(bit flag)
{
	uchar temp;
	dport=0xff;
	cs=0;
	rs=flag;
	rd=0;
	wr=1;
	temp=P1;		
	rd=1;
	return temp;
}	   */


void write(bit flag,uchar dat)
{
	cs=0;_Nop()
	rs=flag;	_Nop()				//flag=1,write command;flag=0,write data
	wr=0;_Nop()
	rd=1;_Nop()
	dport=dat;_Nop()
	wr=1;_Nop()
}

void init(void)
{
	cs=0;_Nop()

	//reset
	rst=0;delay_ms(20);
	delay_ms(20);			//power on reset
	rst=1;
	delay_ms(200);delay_ms(500);
	write(0,0xe2);			//reset by command
	delay_ms(2);
    delay_ms(20);
	//power control					
	write(0,0xe9);			//Bias Ratio:1/10 bias
	write(0,0x2b);			//power control set as internal power
	write(0,0x25);			//set temperate compensation as 0%
	write(0,0x81);			//electronic potentionmeter
   //	write(0,198);	   //0xc6²»Æð×÷ÓÃ
    write(0,138);

	//display control
	write(0,0xa4);//¹Ø±ÕËùÓÐÏñËØ			//all pixel off 
	//write(0,0xa5);//´ò¿ªËùÓÐÏñËØµã ¼´µãÁÁÕû¸öÆÁÄ»
	write(0,0xa6);//¹Ø±ÕÏñËØ·´ÏÔ ¾ö¶¨ÆÁÄ»·´ÏÔ			//inverse display off
//	write(0,0xa7); //´ò¿ªÏñËØ·´ÏÔ ¾ö¶¨ÆÁÄ»·´ÏÔ

	//lcd control
	write(0,0xc0);			//19:partial display and MX disable,MY enable
//	write(0,0xc7);//²»¹ÜÓÃ£¿£¿
	
	write(0,0xa3);			//line rate 15.2klps
	write(0,0xd1);			//rgb-rgb
	// write(0,0xd0);//BGR-BGR
	
	write(0,0xd5);			//4k color mode	 12-bit/RGB
   // write(0,0xd6);			//64K color mode 5R-6G-5B 16-bit/RGB
	
	write(0,0x84);			//12:partial display control disable

	//n-line inversion
	write(0,0xc8);
	//write(0,0x10);			//enable NIV

	//com scan fuction
	write(0,0xda);			//enable FRC,PWM,LRM sequence


	//window ÏÔÊ¾´°¿Ú´óÐ¡ÉèÖÃ
	write(0,0xf4);			//wpc0:column	starting column address	ÁÐÆðÊ¼µØÖ·
	write(0,0x25);			//start from 130   37
	write(0,0xf6);			//wpc1			 ending column address	 ÁÐ½áÊøµØÖ·
	write(0,0x5A);			//end:272 	   90
	//ÒòÎªÁÐ¿ªÊ¼µ½½áÎ²¹²90-37=53¸öÊýËùÒÔ Ò»¸öÊý´ú±í160/53=3¸öÏñËØ

	write(0,0xf5);			//wpp0:row		 starting row address	  ÐÐÆðÊ¼µØÖ·
	write(0,0x00);			//start from 0
	write(0,0xf7);			//wpp1			 ending  row address	   ÐÐ½áÊøµØÖ·
	write(0,0x9F);			//end 160  0x9F=159
	//ÐÐ¿ªÊ¼µ½½áÊø¹²160¸öÊýËùÒÔÒ»¸öÊý´ú±í160/160=1¸öÏñËØ

	write(0,0xf8);			//inside mode   set window program mode

	write(0,0x89);			//RAM control   µØÖ·×Ô¶¯¼ÓÒ»    AC1=0 ÁÐÏÈÔö¼Ó	  AC2=0  ¿ØÖÆÐÐÔö¼Ó+1»¹ÊÇ-1	 AC0=1
    //write(0,0x8b);	   //ÊÇ0x89µÄ90¡ã·­×ªÏÔÊ¾			AC1=1 ÐÐÏÈÔö¼Ó								 AC0=1
    //write(0,0x8d);	   //							    AC1=0             AC2=1  ¿ØÖÆÐÐÔö¼Ó+1»¹ÊÇ-1	 AC0=1
	//write(0,0x8a);


	write(0,0xad);			//display on,select on/off mode.Green Enhance mode disable	 ±³¾°ÉîºÚÑ©»¨
	//write(0,0xa8);//wrong	
   //	write(0,0xa9);//ºÍ0xadÒ»¸öÐ§¹û  ÓÐÑ©»¨	
   //	write(0,0xac);	//wrong
    //write(0,0xaf);	 //ÁíÒ»ÖÖ»Ò¶È  Ç³ºÚÑ©»¨


	//scroll line ¹ö¶¯ÐÐ
	write(0,0x40);			//low bit of scroll line
	write(0,0x50);			//high bit of scroll line
	write(0,0xc4);			//19,enable FLT and FLB
	write(0,0x90);			//14:FLT,FLB set
	write(0,0x00);

	//partial display ²¿·ÖÏÔÊ¾
	write(0,0x84);			//12,set partial display control:off
	write(0,0xf1);			//com end
	write(0,0x9f);			//160
	write(0,0xf2);			//display start 
	write(0,0);				//0
	write(0,0xf3);			//display end
	write(0,159);			//160	
}


void words_1616(uchar x,uchar y,uchar type,uchar *p)	//type=1,ascii;type=2,Chinese character	  ÏÔÊ¾16*16ÏñËØ	ºº×Ö
{		 //x¿ØÖÆÁÐÏÔÊ¾µØÖ·  y¿ØÖÆÐÐÏÔÊ¾µØÖ·
//ºº×ÖÈ¡Ä£·½Ê½ 16*16 ×ÝÏòÈ¡Ä£  	×Ö½Úµ¹Ðò
	uchar i,k,j,m,n,l,x0,dat0,dat1,dat2,dat3,dat6;
	x=37+x;	 //¿ØÖÆLCD RAMµØÖ·ÓÃ
	x0=0x00|(x&0x0f);
	x=0x10|((x&0xf0)>>4);
	for(i=0;i<2;i++)  //ºáÏò 2¸ö×Ö½Ú ÒòÎªÊÇ×ÝÏòÈ¡Ä£ ËùÒÔºáÏò ¹²2*8=16¸öÏñËØµã  iµÄÉÏÏÞÎª×Ö·û¿í¶È/8 eg£º16/8=2
	{  //iµÄÖµ¿ØÖÆ×Å×Ö·û¿í¶ÈÈôÏÔÊ¾48*24Ôòfor(i=0;i<6;i++)
		n=i*8*type;  //×ÝÏò type==2Ê±Îªºº×Ö ÒòÎªÊÇ16*16³ß´çµÄºº×ÖËùÒÔ×ÝÏòÃ¿´ÎÐèÒª16¸öbit
		//nµÄÖµ¿ØÖÆ×Å×Ö·û¸ß¶ÈÏñËØÈôÏÔÊ¾24*48Ôòn=i*24*type (type==2Ê±ÏÔÊ¾ºº×Ö)
		for(j=0;j<8;j++)//jµÄ8´ÎÑ­»·¸ºÔð½«È¡Ä£×Ö½ÚÖÐµÄÊý¾Ý»¹Ô­³É8bitÏñËØÊý¾Ý
		{
			m=i*8+j;  //¿ØÖÆLCD RAMµÄµØÖ·

			write(0,0x89); //µØÖ·×Ô¶¯¼ÓÒ»

			write(0,x0);// write display address   area
			write(0,x);//  write display address   area
			write(0,0x60|((y+m)&0x0f));	//  write display address   area
			write(0,0x70|(((y+m)&0xf0)>>4)); //	 write display address   area

			for(k=0;k<2*type;k++)//´ËÑ­»·ÏÔÊ¾ºº×ÖµÄÊ±ºòÖ´ÐÐ4*4=16¸ö×Ö½Ú£¨forÑ­»·ÖÐÓÃdat0-dat4¼ÆËã×ÖÄ£ÖÐµÄ4¸ö×Ö½Ú£©
								
			{					    
				l=k*4+n;//lºÍnÁªºÏ¿ØÖÆºº×Ö¸ß¶ÈÒòÎªÊÇ24*24ËùÒÔÃ¿´ÎÖ´ÐÐ4*4=16¸öÑ­»·  ÆäÖÐ(4±íÊ¾kµÄÊý¾Ý·¶Î§ 4±íÊ¾kµÄ¹«±¶Êý)

				dat6=0x01<<j;//Í¨¹ýÉÏÒ»²ãjµÄforÑ­»·À´È¡³öÃ»¸ö×Ö½ÚÖÐµÄ8bitÊý¾Ý
				dat0=(*(p+l))&dat6;
				dat0=dat0>>j;
				dat0<<=7;  //È¡³ö×ÖÄ£Êý×éÖÐµÚp+l¸ö×Ö½ÚµÄµÚjÎ»²¢ÒÆµ½µÚ8Î»ÉÏ
				
				dat1=(*(p+l+1))&dat6;
				dat1=dat1>>j;
				dat1<<=3;//È¡³ö×ÖÄ£Êý×éÖÐµÚp+l+1¸ö×Ö½ÚµÄµÚjÎ»²¢ÒÆµ½µÚ4Î»ÉÏ

				dat2=*(p+2+l)&dat6;
				dat2=dat2>>j;
				dat2<<=7;//È¡³ö×ÖÄ£Êý×éÖÐµÚp+l+2¸ö×Ö½ÚµÄµÚjÎ»²¢ÒÆµ½µÚ8Î»ÉÏ

				dat3=(*(p+3+l))&dat6;
				dat3=dat3>>j;
				dat3<<=3;//È¡³ö×ÖÄ£Êý×éÖÐµÚp+l+3¸ö×Ö½ÚµÄµÚjÎ»²¢ÒÆµ½µÚ8Î»ÉÏ

				write(1,dat0|dat1);	//Ð´ÈëµÄÊý¾ÝÊÇ16½øÖÆ°üº¬2¸ö×Ö½ÚÊý¾Ý	½«dat0·Åµ½¸ß4Î» dat1·Åµ½µÚ4Î»
				write(1,dat2|dat3);
			}
			write(0,0x88);	//
		}
	}
	write(0,0x89);
}



void words_2424(uchar x,uchar y,uchar type,uchar *p)	//type=1,ascii;type=2,Chinese character	  ÏÔÊ¾24*24ÏñËØ
{		 //x¿ØÖÆÁÐÏÔÊ¾µØÖ·  y¿ØÖÆÐÐÏÔÊ¾µØÖ·
//ºº×ÖÈ¡Ä£·½Ê½ 24*24 ×ÝÏòÈ¡Ä£  	×Ö½Úµ¹Ðò
	uchar i,k,j,m,n,l,x0,dat0,dat1,dat2,dat3,dat4,dat5,dat6;
	x=37+x;
	x0=0x00|(x&0x0f);
	x=0x10|((x&0xf0)>>4);
	for(i=0;i<3;i++)  //ºáÏò 3¸ö×Ö½Ú ÒòÎªÊÇ×ÝÏòÈ¡Ä£ ËùÒÔºáÏò ¹²3*8=24¸öÏñËØµã  iµÄÉÏÏÞÎª×Ö·û¿í¶È/8 eg£º24/8=3
	{  //iµÄÖµ¿ØÖÆ×Å×Ö·û¿í¶ÈÈôÏÔÊ¾48*24Ôòfor(i=0;i<6;i++)
		n=i*12*type;  //×ÝÏò type==2Ê±Îªºº×Ö ÒòÎªÊÇ24*24³ß´çµÄºº×ÖËùÒÔ×ÝÏòÃ¿´ÎÐèÒª24¸öbit
		//nµÄÖµ¿ØÖÆ×Å×Ö·û¸ß¶ÈÏñËØÈôÏÔÊ¾24*48Ôòn=i*24*type (type==2Ê±ÏÔÊ¾ºº×Ö)
		for(j=0;j<8;j++)//jµÄ8´ÎÑ­»·¸ºÔð½«È¡Ä£×Ö½ÚÖÐµÄÊý¾Ý»¹Ô­³É8bitÏñËØÊý¾Ý
		{
			m=i*8+j;  //¿ØÖÆLCD RAMµÄµØÖ·

			write(0,0x89); //µØÖ·×Ô¶¯¼ÓÒ»

			write(0,x0);// write display address   area
			write(0,x);//  write display address   area
			write(0,0x60|((y+m)&0x0f));	//  write display address   area
			write(0,0x70|(((y+m)&0xf0)>>4)); //	 write display address   area

			for(k=0;k<2*type;k++)//´ËÑ­»·ÏÔÊ¾ºº×ÖµÄÊ±ºòÖ´ÐÐ4*6=24¸ö×Ö½Ú£¨forÑ­»·ÖÐÓÃdat0-dat6¼ÆËã×ÖÄ£ÖÐµÄ6¸ö×Ö½Ú£©
								
			{					    
				l=k*6+n;//lºÍnÁªºÏ¿ØÖÆºº×Ö¸ß¶ÈÒòÎªÊÇ24*24ËùÒÔÃ¿´ÎÖ´ÐÐ4*6=24¸öÑ­»·  ÆäÖÐ(4±íÊ¾kµÄÊý¾Ý·¶Î§ 6±íÊ¾kµÄ¹«±¶Êý)

				dat6=0x01<<j;//Í¨¹ýÉÏÒ»²ãjµÄforÑ­»·À´È¡³öÃ»¸ö×Ö½ÚÖÐµÄ8bitÊý¾Ý
				dat0=(*(p+l))&dat6;
				dat0=dat0>>j;
				dat0<<=7; //È¡³ö×ÖÄ£Êý×éÖÐµÚp+l¸ö×Ö½ÚµÄµÚjÎ»²¢ÒÆµ½µÚ8Î»ÉÏ
				
				dat1=(*(p+l+1))&dat6;
				dat1=dat1>>j;
				dat1<<=3;//È¡³ö×ÖÄ£Êý×éÖÐµÚp+l+1¸ö×Ö½ÚµÄµÚjÎ»²¢ÒÆµ½µÚ4Î»ÉÏ

				dat2=*(p+2+l)&dat6;
				dat2=dat2>>j;
				dat2<<=7; //È¡³ö×ÖÄ£Êý×éÖÐµÚp+2¸ö×Ö½ÚµÄµÚjÎ»²¢ÒÆµ½µÚ8Î»ÉÏ

				dat3=(*(p+3+l))&dat6;
				dat3=dat3>>j;
				dat3<<=3;//È¡³ö×ÖÄ£Êý×éÖÐµÚp+l+3¸ö×Ö½ÚµÄµÚjÎ»²¢ÒÆµ½µÚ4Î»ÉÏ

				dat4=(*(p+4+l))&dat6;
				dat4=dat4>>j;
				dat4<<=7; //È¡³ö×ÖÄ£Êý×éÖÐµÚp+l+4¸ö×Ö½ÚµÄµÚjÎ»²¢ÒÆµ½µÚ8Î»ÉÏ

				dat5=(*(p+5+l))&dat6;
				dat5=dat5>>j;
				dat5<<=3; //È¡³ö×ÖÄ£Êý×éÖÐµÚp+l+5¸ö×Ö½ÚµÄµÚjÎ»²¢ÒÆµ½µÚ4Î»ÉÏ

				write(1,dat0|dat1);	//Ð´ÈëµÄÊý¾ÝÊÇ16½øÖÆ°üº¬2¸ö×Ö½ÚÊý¾Ý	½«dat0·Åµ½¸ß4Î» dat1·Åµ½µÚ4Î»
				write(1,dat2|dat3);
				write(1,dat4|dat5);

			}
			write(0,0x88);	//
		}
	}
	write(0,0x89);
}	   

void picture(uchar *p)
{
	uchar i,k;
	write(0,0x60);			//row address LSB
	write(0,0x70);			//row address MSB
	write(0,0x05);			//culomn address LSB
	write(0,0x12);			//culomn address MSB

	for(i=0;i<160;i++)

	{
			for(k=0;k<81;k++)
			{											
				write(1,*p++); 
			}
	}
}
void Set_LcdRam_Addr(uchar x,uchar y)
{	   //ÏÔÊ¾´°¿Ú´óÐ¡ÉèÖÃ--ÂúÆÁ
	   write(0,0xf4);  //set window program starting column address  
	   write(0,0x25);
	   write(0,0xf6); //set window program ending column address 
	   write(0,0x5a);
	   write(0,0xf5); //set window program starting row address 
	   write(0,0x00);
	   write(0,0xf7); //set window program ending row address
	   write(0,0x77);

	   write(0,0x70|((x>>4)&0x0f));	  //row MSB
	   write(0,0x60|(x&0x0f));		  //row LSB 
	   write(0,0x10|(((y+0x25)>>4)&0x07)); //column MSB
	   write(0,0x00|((y+0x25)&0x0f));	   //column LSB


	   write(0,0xf8);  //window program mode--inside

}
void lcd_part(uchar x,uchar y,uchar x_len,uchar y_len)//xÆðÊ¼ÐÐµØÖ·	y£ºÁÐÆðÊ¼µØÖ·  x_lenÏÔÊ¾µÄ¸ß¶È
{													  //y_len£ºÏÔÊ¾µÄ³¤¶È
	unsigned char  i,j;

	for(i=0;i<x_len;i++)
	{
		Set_LcdRam_Addr(x+i,y);
	//	for(j=0;j<(y_len*3)/2;j++)
		for(j=0;j<(y_len);j++)  //1
		{	
			write(1,0xff);
		}
	}
}

/*void lcd_hanzi(uchar x,uchar y,uchar *p)//xÆðÊ¼ÐÐµØÖ·	y£ºÁÐÆðÊ¼µØÖ·  x_lenÏÔÊ¾µÄ¸ß¶È
{													  //y_len£ºÏÔÊ¾µÄ³¤¶È
	unsigned char  i,j;

	for(i=0;i<40;i++)
	{
		Set_LcdRam_Addr(x+i,y);
		for(j=0;j<40;j++)
		write(1,*p++);
	}
} */

void lcdclear(uchar dat1)
{
	uchar i,j;
	write(0,0x60);			//row address LSB    ×îµÍÓÐÐ§Î»
	write(0,0x70);			//row address MSB    ×î¸ßÓÐÐ§Î»
	write(0,0x05);			//culomn address LSB ×îµÍÓÐÐ§Î»
	write(0,0x12);			//culomn address MSB ×î¸ßÓÐÐ§Î»

 	for(j=0;j<160;j++)
	{
		for(i=0;i<27;i++)
		
		{
			
				write(1,dat1);	//¼ûÊÖ²áÖÐµÄµÚ21ÌõÃüÁî¸ñÊ½  ½«RGBµÄÃ¿3¸ö×Ö½Ú´æµ½16Î»¼Ä´æÆ÷ÖÐ
				write(1,dat1);
				write(1,dat1);	
		}
	
	}
}


/*void lcdscan(uchar dat1,uchar dat2)
{
	uchar i,j;
	write(0,0x60);			//row address LSB    ×îµÍÓÐÐ§Î»
	write(0,0x70);			//row address MSB    ×î¸ßÓÐÐ§Î»
	write(0,0x05);			//culomn address LSB ×îµÍÓÐÐ§Î»
	write(0,0x12);			//culomn address MSB ×î¸ßÓÐÐ§Î»

 


	for(j=0;j<160;j++)
	{
		for(i=0;i<27;i++)
		{
			
	
				if(j%2==0)
			{
				write(1,dat1);	//¼ûÊÖ²áÖÐµÄµÚ21ÌõÃüÁî¸ñÊ½  ½«RGBµÄÃ¿3¸ö×Ö½Ú´æµ½16Î»¼Ä´æÆ÷ÖÐ
				write(1,dat1);	//Ã»ÌõÖ¸Áî°üº¬RGB¹²12Î»Êý¾Ý´æ·Å¸ñÊ½ÊÇÕ¼ÓÃ16Î»ÄÚ´æËùÒÔÃ¿¸öÀïÃæÖ´ÐÐ3ÌõÓï¾äÏàµ±ÓÚ3*2=6×Ö½Ú
				write(1,dat1);	//ËùÒÔÖ´ÐÐÍêÀï±ßÑ­»·Ïàµ±ÓÚ27*6=162ÂúÆÁ
			}//´ËÑ­»·Ò²¿ÉÒÔÓÃfor(i=0;i<81;i++){write(1,dat1);}Ìæ»»¼´Ö»ÓÐÒ»ÌõÑ­»·Óï¾äÍâÃæÓÐ81¸ö81*1*2=162ÂúÆÁ
			else
			{
				write(1,dat2);
				write(1,dat2);
				write(1,dat2);
			}			
		}
	
	}

} 	  */



  void lcdscan(uchar dat1,uchar dat2)
{
	uchar i,j;
	write(0,0x60);			//row address LSB    ×îµÍÓÐÐ§Î»
	write(0,0x70);			//row address MSB    ×î¸ßÓÐÐ§Î»
	write(0,0x05);			//culomn address LSB ×îµÍÓÐÐ§Î»
	write(0,0x12);			//culomn address MSB ×î¸ßÓÐÐ§Î»

	for(j=0;j<160;j++)
	{
		for(i=0;i<27;i++)
		{
			if(j%2==0)
			{					 
				write(1,dat1);	//¼ûÊÖ²áÖÐµÄµÚ21ÌõÃüÁî¸ñÊ½  ½«RGBµÄÃ¿3¸ö×Ö½Ú´æµ½16Î»¼Ä´æÆ÷ÖÐ
				write(1,dat1);	//Ã»ÌõÖ¸Áî°üº¬RGB¹²12Î»Êý¾Ý´æ·Å¸ñÊ½ÊÇÕ¼ÓÃ16Î»ÄÚ´æËùÒÔÃ¿¸öÀïÃæÖ´ÐÐ3ÌõÓï¾äÏàµ±ÓÚ3*2=6×Ö½Ú
				write(1,dat1);	//ËùÒÔÖ´ÐÐÍêÀï±ßÑ­»·Ïàµ±ÓÚ27*6=162ÂúÆÁ
			}//´ËÑ­»·Ò²¿ÉÒÔÓÃfor(i=0;i<81;i++){write(1,dat1);}Ìæ»»¼´Ö»ÓÐÒ»ÌõÑ­»·Óï¾äÍâÃæÓÐ81¸ö81*1*2=162ÂúÆÁ
			else
			{
				write(1,dat2);
				write(1,dat2);
				write(1,dat2);
			}		
		}

		
		
		
	}
}	  

void display_5character(uchar addry,uchar addrx,uchar type,uchar *p)
//void display_5character(uchar addry,uchar type,uchar *p)
{	  //addrx-lie address,addry-hang address,type-2ºº×Ö type-1 ascii *ºº×ÖÊý×éËùÖ¸ÏòµÄµØÖ·Ö¸Õë  
	uchar i,j,*temp;
	for(i=0;i<6;i++) //Ð
	{
		temp=p+i*72;
		j=9*i+4;
	//	words_2424(j,addry,type,temp);//j¿ØÖÆÁÐµØÖ·  10¿ØÖÆÔÚµÚ10ÐÐÉÏÏÔÊ¾
	words_2424(addry*i+4,addrx,type,temp);//j¿ØÖÆÁÐµØÖ·  10¿ØÖÆÔÚµÚ10ÐÐÉÏÏÔÊ¾
	}
} 






void main(void)
{	 
//	uchar *p,*e;								 

	//bl=1;  //LCD ±³¹â



	init();	
	lcdclear(0x00);	//ÇåÆÁ
	

	while(1)
	{
	

	    // display_5character(6,10,2,try);
	     display_5character(8,30,2,hanzi);
	    // display_5character(10,70,2,hanzi);
	   //display_5character(10,100,2,hanzi);
	   //display_5character(10,130,2,try);

	
	}
}

